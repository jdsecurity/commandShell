upstream backend
{
    server backend1.example.com weight=5;
    server backend2.example.com:8080;
    server unix:/tmp/backend3;
}

server
{
    location /
    {
	proxy_pass http://backend;
    }
}


upstream backend
{
    ip_hash;
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com down;
    server backend4.example.com;
}


upstream backend
{
    server backend.example.com weight=5;
    server 127.0.0.1:8080 max_fails=3 fail_timeout=30s;
    server unix:/tmp/backend2 backup;
}

log_format timing '$remote_addr - $remote_user [$time_local] $request '
	'upstream_response_time $upstream_response_time '
 	'msec $mse request_time $request_time';

log_format up_head '$remote_addr - $remote_user [$time_local] $request '
	'upstream_http_content_type $upstream_http_content_type';

$upstream_addr
$upstream_status
$upstream_response_time
$upstream_http_$HEADER
